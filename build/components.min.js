var components=angular.module("components",["components.pick"]),ngPick=angular.module("components.pick",[]).directive("ngPick",function(){return{priority:1200,restrict:"E",compile:function(a,b){b.orderControlVisible="false"==b.orderControlVisible?!1:!0,b.columns=a.find("column")},controller:["$attrs",function(a){this.columns=a.columns}]}}).directive("ngPick",function(){return{priority:1100,restrict:"E",replace:!0,scope:{inputTitle:"@",outputTitle:"@",listHeight:"@",listWidth:"@",varr:"@var",addAllLabel:"@",addLabel:"@",removeLabel:"@",removeAllLabel:"@",orderControlVisible:"@",firstLabel:"@",upLabel:"@",downLabel:"@",lastLabel:"@",input:"=",output:"="},link:function(a){a.inputItem=null,a.outputItem=null;var b=function(a,b){var c=b.indexOf(a);c>-1&&b.splice(c,1)},c=function(a,b,c){var d=b.indexOf(a);b.splice(d+c,0,b.splice(d,1)[0])};a.selectInputItem=function(b){a.inputItem=b,a.outputItem=null},a.selectOutputItem=function(b){a.outputItem=b,a.inputItem=null},a.selectAndAddInputItem=function(b){a.inputItem=b,a.add()},a.selectAndRemoveOutputItem=function(b){a.outputItem=b,a.remove()},a.addAll=function(){a.output=a.output.concat(a.input),a.input=[],a.inputItem=null},a.add=function(){b(a.inputItem,a.input),a.output.push(a.inputItem),a.inputItem=null},a.remove=function(){b(a.outputItem,a.output),a.input.push(a.outputItem),a.outputItem=null},a.removeAll=function(){a.input=a.input.concat(a.output),a.output=[],a.outputItem=null},a.hasInput=function(){return a.input.length},a.hasOutput=function(){return a.output.length},a.hasInputItem=function(){return a.inputItem},a.hasOutputItem=function(){return a.outputItem},a.isFirst=function(){return!a.hasOutputItem()||a.output[0]===a.outputItem},a.isLast=function(){return!a.hasOutputItem()||a.output[a.output.length-1]===a.outputItem},a.first=function(){b(a.outputItem,a.output),a.output.unshift(a.outputItem)},a.up=function(){c(a.outputItem,a.output,-1)},a.down=function(){c(a.outputItem,a.output,1)},a.last=function(){b(a.outputItem,a.output),a.output.push(a.outputItem)}},template:'<table class="ng-pick"><tr><td><strong>{{inputTitle}}</strong></td><td></td><td><strong>{{outputTitle}}</strong></td><td></td></tr><tr><td ng-style="{width: listWidth || \'240px\'}"><div class="panel panel-default"><table class="table"><thead><tr title-transclude></tr></thead></table><div style="overflow-y:auto;overflow-x:hidden;" ng-style="{height: listHeight || \'200px\'}"><table class="table table-striped table-hover"><tbody><tr ng-repeat="item in input" ng-click="selectInputItem(item)" ng-dblclick="selectAndAddInputItem(item)" ng-class="{info:item === inputItem}" row-transclude></tbody></table></div></div></td><td><div class="btn-group-vertical"  style="min-width:100px;padding:10px;"><button type="button" ng-click="addAll()" ng-disabled="!hasInput()" class="btn btn-primary">{{addAllLabel || "Adicionar Todos"}}</button><button type="button" ng-click="add()" ng-disabled="!hasInputItem()" class="btn btn-primary">{{addLabel || "Adicionar Item"}}</button><button type="button" ng-click="remove()" ng-disabled="!hasOutputItem()" class="btn btn-primary">{{removeLabel || "Remover Item"}}</button><button type="button" ng-click="removeAll()" ng-disabled="!hasOutput()" class="btn btn-primary">{{removeAllLabel || "Remover Todos"}}</button></div></td><td ng-style="{width: listWidth || \'240px\'}"><div class="panel panel-default"><table class="table"><thead><tr title-transclude></tr></thead></table><div style="overflow-y:auto;overflow-x:hidden;" ng-style="{height: listHeight || \'200px\'}"><table class="table table-striped table-hover"><tbody><tr ng-repeat="item in output | orderBy:predicateOutput:reverseOutput" ng-click="selectOutputItem(item)" ng-dblclick="selectAndRemoveOutputItem(item)" ng-class="{info:item === outputItem}" row-transclude></tbody></table></div></div></td><td ng-if="orderControlVisible"><div class="btn-group-vertical" style="min-width:100px;padding:10px;"><button type="button" ng-click="first()" ng-disabled="isFirst()" class="btn btn-primary">{{firstLabel || "Primeiro"}}</button><button type="button" ng-click="up()" ng-disabled="isFirst()" class="btn btn-primary">{{upLabel || "Sobe"}}</button><button type="button" ng-click="down()" ng-disabled="isLast()" class="btn btn-primary">{{downLabel || "Desce"}}</button><button type="button" ng-click="last()" ng-disabled="isLast()" class="btn btn-primary">{{lastLabel || "Ãšltimo"}}</button></div></td></tr></table>'}}).directive("titleTransclude",["$compile",function(a){return{require:"^ngPick",link:function(b,c,d,e){var f=[];angular.forEach(e.columns,function(a){var b=document.createElement("th");a&&a.attributes&&a.attributes.width&&a.attributes.width.value&&(b.style.width=a.attributes.width.value),b.innerHTML=a.attributes.caption.value,f.push(b)}),c.append(f),a(f)(b)}}}]).directive("rowTransclude",["$compile",function(a){return{require:"^ngPick",link:function(b,c,d,e){var f,g,h,i=/{{([^}]*)}}/g,j=[];if(angular.forEach(e.columns,function(a){var c=document.createElement("td");for(a&&a.attributes&&a.attributes.width&&a.attributes.width.value&&(c.style.width=a.attributes.width.value),c.innerHTML=a.innerHTML;null!==(f=i.exec(c.innerHTML));)g=f[0],h=f[1],h=h.replace(b.varr,"item"),c.innerHTML=c.innerHTML.replace(g,"{{"+h+"}}");if(c.childNodes&&c.childNodes.length>0)for(var d=0;d<c.childNodes.length;d++)if(c.childNodes[d].attributes&&c.childNodes[d].attributes.length>0)for(var e=0;e<c.childNodes[d].attributes.length;e++)0===c.childNodes[d].attributes[e].name.indexOf("ng-")&&(c.childNodes[d].attributes[e].value=c.childNodes[d].attributes[e].value.replace(b.varr,"item"));j.push(c)}),!e.columns||0===e.columns.length){var k=document.createElement("td");k.innerHTML="{{item}}",j.push(k)}c.append(j),a(j)(b)}}}]);